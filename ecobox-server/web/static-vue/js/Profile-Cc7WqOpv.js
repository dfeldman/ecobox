import{_ as p,c as d,a as s,l as h,m as v,j as x,b as c,t as i,w as P,d as f,v as u,e as g,u as C,h as M,r as k,f as w,o as l}from"./index-DhluikCv.js";import{r as F}from"./format-WGrLFNq2.js";const N={name:"Profile",setup(){const a=C(),o=M(""),r=k({currentPassword:"",newPassword:"",confirmPassword:""}),e=w(()=>a.user),_=w(()=>a.loading),b=w(()=>a.error),m=w(()=>r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword),t=n=>{if(!n||n==="0001-01-01T00:00:00Z")return"Never";try{return F(new Date(n),"MMM dd, yyyy HH:mm")}catch{return"Invalid date"}},y=()=>{r.currentPassword="",r.newPassword="",r.confirmPassword="",a.clearError(),o.value=""};return{user:e,loading:_,error:b,passwordForm:r,passwordMismatch:m,successMessage:o,formatDate:t,resetForm:y,handleChangePassword:async()=>{if(m.value)return;a.clearError(),o.value="";const n=await a.changePassword(r.currentPassword,r.newPassword,r.confirmPassword);n.success&&(o.value=n.message,y())}}}},D={class:"min-h-screen bg-gray-50"},V={class:"bg-white shadow"},j={class:"container mx-auto px-6 py-4"},U={class:"flex items-center justify-between"},T={class:"flex items-center gap-4"},q={class:"container mx-auto px-6 py-8 max-w-2xl"},A={class:"space-y-6"},B={class:"card"},E={class:"card-body"},H={key:0,class:"space-y-4"},I={class:"flex justify-between"},L={class:"font-medium"},S={class:"flex justify-between"},Z={class:"font-medium"},z={class:"flex justify-between"},G={class:"font-medium"},J={class:"flex justify-between"},K={class:"font-medium"},O={class:"card"},Q={class:"card-body"},R={class:"form-group"},W=["disabled"],X={class:"form-group"},Y=["disabled"],$={class:"form-group"},ss=["disabled"],os={key:0,class:"text-red text-sm"},es={key:1,class:"text-red text-sm"},rs={key:2,class:"text-green text-sm"},ts={class:"flex gap-2"},as=["disabled"],ns={key:0,class:"loading w-3 h-3 mr-1"},ds=["disabled"];function is(a,o,r,e,_,b){const m=x("router-link");return l(),d("div",D,[s("header",V,[s("div",j,[s("div",U,[s("div",T,[h(m,{to:"/",class:"btn btn-secondary btn-sm"},{default:v(()=>o[5]||(o[5]=[g(" ← Dashboard ",-1)])),_:1,__:[5]}),o[6]||(o[6]=s("h1",{class:"text-2xl font-bold text-gray-900"},"Profile",-1))])])])]),s("main",q,[s("div",A,[s("div",B,[o[11]||(o[11]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"User Information")],-1)),s("div",E,[e.user?(l(),d("div",H,[s("div",I,[o[7]||(o[7]=s("span",{class:"text-gray-600"},"Username:",-1)),s("span",L,i(e.user.username),1)]),s("div",S,[o[8]||(o[8]=s("span",{class:"text-gray-600"},"Account Type:",-1)),s("span",Z,i(e.user.is_admin?"Administrator":"User"),1)]),s("div",z,[o[9]||(o[9]=s("span",{class:"text-gray-600"},"Created:",-1)),s("span",G,i(e.formatDate(e.user.created_at)),1)]),s("div",J,[o[10]||(o[10]=s("span",{class:"text-gray-600"},"Last Login:",-1)),s("span",K,i(e.formatDate(e.user.last_login)),1)])])):c("",!0)])]),s("div",O,[o[16]||(o[16]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"Change Password")],-1)),s("div",Q,[s("form",{onSubmit:o[4]||(o[4]=P((...t)=>e.handleChangePassword&&e.handleChangePassword(...t),["prevent"])),class:"space-y-4"},[s("div",R,[o[12]||(o[12]=s("label",{class:"form-label"},"Current Password",-1)),f(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.passwordForm.currentPassword=t),type:"password",required:"",class:"form-input",disabled:e.loading},null,8,W),[[u,e.passwordForm.currentPassword]])]),s("div",X,[o[13]||(o[13]=s("label",{class:"form-label"},"New Password",-1)),f(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>e.passwordForm.newPassword=t),type:"password",required:"",minlength:"6",class:"form-input",disabled:e.loading},null,8,Y),[[u,e.passwordForm.newPassword]])]),s("div",$,[o[14]||(o[14]=s("label",{class:"form-label"},"Confirm New Password",-1)),f(s("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>e.passwordForm.confirmPassword=t),type:"password",required:"",minlength:"6",class:"form-input",disabled:e.loading},null,8,ss),[[u,e.passwordForm.confirmPassword]])]),e.error?(l(),d("div",os,i(e.error),1)):c("",!0),e.passwordMismatch?(l(),d("div",es," New passwords do not match ")):c("",!0),e.successMessage?(l(),d("div",rs,i(e.successMessage),1)):c("",!0),s("div",ts,[s("button",{type:"submit",class:"btn btn-primary",disabled:e.loading||e.passwordMismatch},[e.loading?(l(),d("span",ns)):c("",!0),o[15]||(o[15]=g(" Change Password ",-1))],8,as),s("button",{type:"button",onClick:o[3]||(o[3]=(...t)=>e.resetForm&&e.resetForm(...t)),class:"btn btn-secondary",disabled:e.loading}," Cancel ",8,ds)])],32)])])])])])}const ws=p(N,[["render",is]]);export{ws as default};
